#
CC 		= gcc
opt 	= -O2
float 	= -DPAFLOAT
hpdbg 	= -DHPDBG -Wall -g
lib 	= -lasound -lportaudio -lsndfile -lfftw3 -lm $(opt)
#LIBS	= -lasnd -lmtx -lutil $(lib)
LIBS	= -lmtx -lutil $(lib)
TARGET	= paply  pareco
HM		= ..
INC		= -I$(HM)/include 	\
		-I$(HM)/libasnd	\
		-I$(HM)/libmtx	\
		-I$(HM)/libutil \

LIBDIR 	= -L$(HM)/libasnd	\
		-L$(HM)/libmtx 	\
		-L$(HM)/libutil

CFLAGS  	= $(opt) $(float) $(hpdbg) $(INC)
HDRS		= 

SRC = paply.c pa-misc.c devinfo.c sffmt.c
OBJ = $(SRC:%.c=%.o)
SRC2 = sin4.c pa-misc.c devinfo.c sffmt.c
OBJ2 = $(SRC2:%.c=%.o)
SRC3 = sin5.c pa-misc.c devinfo.c sffmt.c
OBJ3 = $(SRC3:%.c=%.o)
SRC4 = filter.c pa-misc.c devinfo.c sffmt.c
OBJ4 = $(SRC4:%.c=%.o)
SRC5 = DFT2.c pa-misc.c devinfo.c sffmt.c
OBJ5 = $(SRC5:%.c=%.o)
SRC6 = FFT.c pa-misc.c devinfo.c sffmt.c
OBJ6 = $(SRC6:%.c=%.o)
SRC7 = FFT1.c Fft.c pa-misc.c devinfo.c sffmt.c
OBJ7 = $(SRC7:%.c=%.o)

SRC_REC = parec.c pa-misc.c devinfo.c sffmt.c
OBJ_REC = $(SRC_REC:%.c=%.o)
$(TARGET): $(HM)/libasnd/libasnd.a $(HM)/libutil/libutil.a $(HM)/libmtx/libmtx.a

paply: $(OBJ) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ) -o $@ $(LIBS)
sin4: $(OBJ2) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ2) -o $@ $(LIBS)
sin5: $(OBJ3) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ3) -o $@ $(LIBS)
filter: $(OBJ4) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ4) -o $@ $(LIBS)
DFT2: $(OBJ5) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ5) -o $@ $(LIBS)
FFT: $(OBJ6) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ6) -o $@ $(LIBS)
FFT1: $(OBJ7) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ7) -o $@ $(LIBS)

pareco: $(OBJ_REC) $(HDRS)
	$(CC) $(LIBDIR) $(OBJ_REC) -o $@ $(LIBS)

clean:
	-rm -f *.o $(TARGET)
